WIKI = {
	["404"]: {
		name: "Page not found",
		tex: "item/shulker_shell",
		desc: "There doesn't seem to be anything here.",
		cat: ["item", "block", "concept"]
	},
	slate: {
		name: "Slate",
		tex: "block/slate",
		desc: "Variant of stone that generates deep underground.",
		cat: ["block"]
	},
	gunstone: {
		name: "Gunstone",
		tex: "block/andesite",
		desc: "Natural mineral that drops cobblestone and sometimes gunpowder.",
		cat: ["block"]
	},
	saltystone: {
		name: "Salty Stone",
		tex: "block/salt_ore",
		desc: "Natural mineral that drops cobblestone and [[Salt]].",
		cat: ["block"]
	},
	radiumore: {
		name: "Radium Ore",
		tex: "block/emerald_ore",
		desc: "Ore that drops one [[Radium]] when mined.",
		cat: ["block"]
	},
	polishedstone: {
		name: "Polished Stone",
		tex: "block/smooth_stone",
		desc: "Smooth stone that is crafted with 4 stone and can be crafted into stone bricks.",
		cat: ["block"]
	},
	box: {
		name: "Box",
		tex: "block/shulker_box",
		desc: "Chest crafted with copper that can be picked up without dropping its contents.",
		cat: ["block"]
	},
	oven: {
		name: "Oven",
		tex: "block/smoker_front",
		desc: "Specialized furnace for making food and drinks at twice the speed.",
		cat: ["block"]
	},
	seat: {
		name: "Seat",
		tex: "block/seat_top",
		desc: "Special slab that can be sat on. Crafted with one wooden slab and one leather.",
		cat: ["block"]
	},
	reinforcedslate: {
		name: "Reinforced Slate",
		tex: "block/reinforced_slate",
		desc: "Very sturdy block that generates in Ancient Cities and can be crafted by combining [[Slate]] with [[Steel]].",
		cat: ["block"]
	},
	cheeseblock: {
		name: "Cheese Block",
		tex: "block/sponge",
		desc: "Yummy block crafted from 4 [[Cheese]]. Absorbs nearby water when placed, turning into [[Wet Cheese]]. Can also be smelted into [[Hard Cheese]].",
		cat: ["block"]
	},
	wetcheese: {
		name: "Wet Cheese",
		tex: "block/wet_sponge",
		desc: "Ewww it's all wet! Can be dried out by smelting or placing in the Nether.",
		cat: ["block"]
	},
	hardcheese: {
		name: "Hard Cheese",
		tex: "block/end_stone",
		desc: "Hard, inedible cheese that can only be used for building or crafting [[Cheese Bricks]]. Made by smelting [[Cheese Block]].",
		cat: ["block"]
	},
	cheesebricks: {
		name: "Cheese Bricks",
		tex: "block/end_stone_bricks",
		desc: "Decorative bricks crafted from [[Hard Cheese]].",
		cat: ["block"]
	},
	radiumrod: {
		name: "Radium Rod",
		tex: "item/end_rod",
		desc: "Light-emitting block that can be crafted into [[Nuke]] or [[Burger o Enchanting]].",
		cat: ["block"]
	},
	nuke: {
		name: "Nuke",
		tex: "block/nuke_side",
		desc: "I am become death...",
		cat: ["block"]
	},
	sludge: {
		name: "Sludge",
		tex: "block/soul_soil",
		desc: "Yucky radioactive sludge that generates in the Nether and when a [[Nuke]] explodes. Can be smelted into [[Radium Dust]].",
		cat: ["block"]
	},
	radiumdust: {
		name: "Radium Dust",
		tex: "item/lime_dye",
		desc: "Lime dye that can crafted to and from [[Radium]].",
		cat: ["item"]
	},
	radium: {
		name: "Radium",
		tex: "item/charcoal",
		desc: "Radioactive substance obtained by mining [[Radium Ore]]. Can be crafted into [[Radium Rod]], [[Radium Dust]], [[Crystal o Enchanting]], or used as fuel.",
		cat: ["item"]
	},
	crystaloenchanting: {
		name: "Crystal o' Enchanting",
		tex: "item/experience_bottle",
		desc: "Radioactive crystal crafted with a crystal and [[Radium]] that breaks into some xp when thrown or can be crafted into [[POG]].",
		cat: ["item"]
	},
	burgeroenchanting: {
		name: "Burger o' Enchanting",
		tex: "item/nuke_burger",
		desc: "Burger crafted with [[Radium Rod]] that increases xp level by one when eaten.",
		cat: ["item"]
	},
	steel: {
		name: "Steel",
		tex: "item/cooked_rabbit",
		desc: "Sturdy material crafted by combining three iron with one [[Black Quartz]]. Used to make buckets, flint and steel, and more.",
		cat: ["item"]
	},
	blackquartz: {
		name: "Black Quartz",
		tex: "item/quartz",
		desc: "Crystal that can be smelted from obsidian.",
		cat: ["item"]
	},
	alchemystone: {
		name: "Alchemy Stone",
		tex: "item/shulker_shell",
		desc: "Magic stone used to transmute iron or copper into gold and coal into diamonds. It can be found in Bastion chests or dropped by Shulkers.",
		cat: ["item"]
	},
	roottonic: {
		name: "Root Tonic",
		tex: "item/magenta_dye",
		desc: "Magenta dye cooked from [[Spicy Roots]] that can be drank to regenerate health.",
		cat: ["item"]
	},
	chocolate: {
		name: "Chocolate",
		tex: "item/brown_dye",
		desc: "Brown dye made with cocoa, sugar, and milk.",
		cat: ["item"]
	},
	scute: {
		name: "Scute",
		tex: "item/armadillo_scute",
		desc: "Protective scute dropped by Armadillos and Turtles. Can be used to craft Wolf Armor or a Shellmet.",
		cat: ["item"]
	},
	fertilizer: {
		name: "Fertilizer",
		tex: "item/bone_meal",
		desc: "Crafted from [[Blood]], Bone, and [[Ash]].",
		cat: ["item"]
	},
	book: {
		name: "Book",
		tex: "item/book",
		desc: "Crafting ingredient that cannot be crafted but is dropped by Witches and Evokers.",
		cat: ["item"]
	},
	banana: {
		name: "Banana",
		tex: "item/chicken",
		desc: "Yummy fruit dropped from Jungle leaves. Can be made into a [[Fruit Salad]].",
		cat: ["item", "food", "fruit"]
	},
	mango: {
		name: "Mango",
		tex: "item/beef",
		desc: "Yummy fruit dropped from Acacia leaves. Can be made into a [[Fruit Salad]].",
		cat: ["item", "food", "fruit"]
	},
	orange: {
		name: "Orange",
		tex: "item/cooked_salmon",
		desc: "Yummy fruit dropped from Birch leaves. Can be made into [[Blood Orange]] or [[Fruit Salad]].",
		cat: ["item", "food", "fruit"]
	},
	bloodorange: {
		name: "Blood Orange",
		tex: "item/blood_orange",
		desc: "Fruit that turns you into a Vampire!",
		cat: ["item", "food", "fruit"]
	},
	cherries: {
		name: "Cherries",
		tex: "item/cooked_chicken",
		desc: "Yummy fruit dropped from Cherry leaves. Can be made into [[Chocolate Cherries]] or a [[Fruit Salad]].",
		cat: ["item", "food", "fruit"]
	},
	chocolatecherries: {
		name: "Chocolate Cherries",
		tex: "item/chocolate_cherries",
		desc: "Food item crafted with [[Cherries]] and [[Chocolate]]. Restores 4 hearts when eaten.",
		cat: ["item", "food"]
	},
	blueberries: {
		name: "Blueberries",
		tex: "item/sweet_berries",
		desc: "Yummy fruit found in bushes in the Taiga. Can be made into purple dye, a [[Slushie]], or a [[Fruit Salad]].",
		cat: ["item", "food", "fruit"]
	},
	slush: {
		name: "Slush",
		tex: "block/powder_snow",
		desc: "Awful snow that you fall through. Can be picked up with a bucket to get [[Slush Bucket]].",
		cat: ["block"]
	},
	slushbucket: {
		name: "Slush Bucket",
		tex: "item/powder_snow_bucket",
		desc: "Bucket of [[Slush]]. Can be made into a [[Slushie]].",
		cat: ["item"]
	},
	slushie: {
		name: "Slushie",
		tex: "item/slushie",
		desc: "Yummy slushy that gives speed when drank. Made from [[Slush Bucket]] and [[Blueberries]].",
		cat: ["item", "food"]
	},
	curd: {
		name: "Curd",
		tex: "item/mutton",
		desc: "Inedible curd crafted from Milk and a mushroom. Can be cooked into [[Cheese]].",
		cat: ["item"]
	},
	cheese: {
		name: "Cheese",
		tex: "item/cooked_mutton",
		desc: "Yummy cheese made from cooking [[Curd]]. Restores 4 hearts when eaten. Can be crafted into [[Cheese Block]] or [[Pizza]].",
		cat: ["item", "food"]
	},
	jerky: {
		name: "Jerky",
		tex: "item/cooked_porkchop",
		desc: "Restores 4 hearts when eaten.",
		cat: ["item", "food"]
	},
	bananabread: {
		name: "Banana Bread",
		tex: "item/banana_bread",
		desc: "Restores 4 hearts when eaten.",
		cat: ["item", "food"]
	},
	fruitsalad: {
		name: "Fruit Salad",
		tex: "item/fruit_salad",
		desc: "Yummy salad that restores 8 hearts and has all the same effects as a Golden Apple.",
		cat: ["item", "food"]
	},
	ectoplasm: {
		name: "Ectoplasm",
		tex: "item/phantom_membrane",
		desc: "Ingredient dropped by [[Phantom]] used to make [[Spectral Wings]].",
		cat: ["item"]
	},
	pog: {
		name: "POG",
		tex: "item/turtle_scute_single",
		desc: "Late-game crafting item used to make [[POG Hammer]], [[Spectral Wings]], and Magic Clock. Crafted from one [[Ruby]], four [[Opal]], and four [[Crystal o Enchanting]].",
		cat: ["item"]
	},
	poghammer: {
		name: "POG Hammer",
		tex: "item/pog_hammer_single",
		desc: "Totally epic mining tool that rips through blocks.",
		cat: ["item"]
	},
	spectralwings: {
		name: "Spectral Wings",
		tex: "item/elytra",
		desc: "Wings crafted from [[Ectoplasm]] and a [[POG]] that allow for gliding and launching upwards. Can be crafted into [[Ruby Wings]].",
		cat: ["item"]
	},
	rubywings: {
		name: "Ruby Wings",
		tex: "item/ruby_elytra",
		desc: "Fireproof, unbreakable variant of [[Spectral Wings]].",
		cat: ["item"]
	},
	blankdisc: {
		name: "Blank Disc",
		tex: "item/blank_disc",
		desc: "Can be used with a [[Phonograph Kit]] and a dye in a smithing table to create a music disc. Crafted from any creeper-droppable music disc.",
		cat: ["item"]
	},
	phonographkit: {
		name: "Phonograph Kit",
		tex: "item/netherite_upgrade_smithing_template",
		desc: "Can be used with a [[Blank Disc]] and a dye in a smithing table to create a music disc. Crafted from a jukebox and a brush.",
		cat: ["item"]
	},
	phantom: {
		name: "Phantom",
		tex: "item/phantom_membrane",
		desc: "Annoying flying ghosts that spawn naturally in the outer islands of the End and drop [[Ectoplasm]].",
		cat: ["mob"]
	}
}

function parseDesc(desc) {
	let a = desc.split("[[")
	if (a.len < 2) {return desc}
	desc = ""
	let bruh = true
	for (const b of a) {
		if (bruh) {
			desc += b
			bruh = false
			continue
		}
		let c = b.split("]]")
		let id = c[0].toLowerCase().split(" ").join("")
		desc += `<a href="index.html?t=e&i=${id}">${c[0]}</a>${c[1]}`
	}
	return desc
}

function buildEntry(id) {
	var entry = WIKI[id]

	if (typeof entry == "undefined") {
		return buildEntry("404")
	}

var content =`<main class="item-page">
  <h2>${entry.name}</h2>
  <img src="../assets/minecraft/textures/${entry.tex}.png" alt="${entry.name}" class="item-image">
  <p>${parseDesc(entry.desc)}</p>`

	for (const cat of entry.cat) {
		content += `<p><a href="index.html?t=c&i=${cat}">List of ${cat}s</a></p>`
	}

	return content + `</main>`
}

function buildCat(id) {
var content =`<main class="category-page">
  <h2>List of ${id}s</h2>
  <div class="item-list">`
	var entryCnt = 0
	for (const entry in WIKI) {
		if (entry == "404") {
			continue
		}
		for (const cat of WIKI[entry].cat) {
			if (cat == id) {
				entryCnt++
				content += `<div class="cat-item"><a href="index.html?t=e&i=${entry}"><img src="../assets/minecraft/textures/${WIKI[entry].tex}.png" alt="${WIKI[entry].name}" class="item-image"> ${WIKI[entry].name}</a></div>`
			}
		}
	}

	if (entryCnt < 1) {
		return buildEntry("404")
	}

	return content + `</div></main>`
}

function get(name) {
	if (name = (new RegExp('[?&]' + encodeURIComponent(name) + '=([^&]*)')).exec(location.search)) {
		return decodeURIComponent(name[1]);
	}
}

function load() {
	var type = get("t").toLowerCase();
	var id = get("i").toLowerCase();

	var doc;
	switch (type) {
		default:
		case "e": // entry: item/block/mob/concept
			doc = buildEntry(id);
			break;

		case "c": // category
			doc = buildCat(id);
			break;
	}

	document.getElementById("main-content").outerHTML = doc;
}

window.onload = load;
